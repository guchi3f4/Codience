<div class='container-lg py-5'>
  <div class='article-error'>
    <%= render 'layouts/error', obj: @article %>
  </div>
  <div class='row'>
    <!-- サイドバー -->
    <div class='col-md-4'>
      <div class='col-md-11 px-0'>
        <!--amcharts タグ表示-->
        <div class='results pb-2'>
          <%= render 'layouts/amcharts', results: @results %>
        </div>
        <% if user_signed_in? %>
          <!-- ユーザ情報 -->
          <div class='user-info'>
            <%= render 'users/user_info_head', user: current_user %>
            <%= render 'users/user_info', user: current_user %>
          </div>
          <!--新規投稿フォーム-->
          <div class='new-article-form'>
            <h3 class="my-3">New Article</h3>
              <%= render 'articles/article_form', article: @article %>
          </div>
        <% else %>
          <%= render 'devise/registrations/new' %>
        <% end %>
      </div>
    </div>
    <!-- メインコンテンツ -->
    <div class='col-md-8'>
      <% if params[:category_name].blank? %>
        <div id='json_category_name' data-json='<%= '未選択'.to_json %>'></div>
      <% else %>
        <div id='json_category_name' data-json='<%= params[:category_name].to_json %>'></div>
      <% end %>
      <% if @tag_names.blank? %>
        <div id='json_tag_names' data-json='<%= [].to_json %>'></div>
      <% else %>
        <div id='json_tag_names' data-json='<%= @tag_names.to_json %>'></div>
      <% end %>
      <!-- 検索フォーム -->
      <%= form_with url: articles_path, method: :get, id:'form' do |f| %>
        <div id="search">
          <div id="category-names" data-json="<%= @category_names.to_json %>"></div>
          <%= javascript_pack_tag 'search_vue' %>
        </div>
        <div class="form-group">
          <%= f.submit "検索", style:'display: none;', id:"search-btn", class:"btn btn-primary" %>
        </div>
      <% end %>
      <!-- 記事一覧 -->
      <div class='d-flex'>
        <h2>Articles</h2>
        <div class='col-4 px-0 index-head'>
          <%= render 'articles/index_head'%>
        </div>
      </div>
      <div class='article-list'>
        <%= render 'articles/index', articles: @articles %>
      </div>
    </div>
  </div>
</div>